const permissions = JSON.parse(
    '[{"id":73,"collection":"directus_files","action":"create","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":74,"collection":"directus_files","action":"read","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":75,"collection":"directus_files","action":"update","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":76,"collection":"directus_files","action":"delete","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":77,"collection":"directus_dashboards","action":"create","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":78,"collection":"directus_dashboards","action":"read","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":79,"collection":"directus_dashboards","action":"update","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":80,"collection":"directus_dashboards","action":"delete","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":81,"collection":"directus_panels","action":"create","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":82,"collection":"directus_panels","action":"read","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":83,"collection":"directus_panels","action":"update","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":84,"collection":"directus_panels","action":"delete","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":85,"collection":"directus_folders","action":"create","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":86,"collection":"directus_folders","action":"read","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":87,"collection":"directus_folders","action":"update","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":88,"collection":"directus_folders","action":"delete","permissions":{},"validation":null,"presets":null,"fields":null,"policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":89,"collection":"directus_users","action":"read","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":90,"collection":"directus_users","action":"update","permissions":{"id":{"_eq":"$CURRENT_USER"}},"validation":null,"presets":null,"fields":"first_name,last_name,email,password,location,title,description,avatar,language,appearance,theme_light,theme_dark,theme_light_overrides,theme_dark_overrides,tfa_secret","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":91,"collection":"directus_roles","action":"read","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":92,"collection":"directus_shares","action":"read","permissions":{"_or":[{"role":{"_eq":"$CURRENT_ROLE"}},{"role":{"_null":true}}]},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":93,"collection":"directus_shares","action":"create","permissions":{},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":94,"collection":"directus_shares","action":"update","permissions":{"user_created":{"_eq":"$CURRENT_USER"}},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":95,"collection":"directus_shares","action":"delete","permissions":{"user_created":{"_eq":"$CURRENT_USER"}},"validation":null,"presets":null,"fields":"*","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"},{"id":96,"collection":"directus_flows","action":"read","permissions":{"trigger":{"_eq":"manual"}},"validation":null,"presets":null,"fields":"id,status,name,icon,color,options,trigger","policy":"07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57"}]',
);
permissions.forEach(p => {
    p.permissions = p.permissions ? JSON.stringify(p.permissions) : null;
    p.validation = p.validation ? JSON.stringify(p.validation) : null;
    p.presets = p.presets ? JSON.stringify(p.presets) : null;
    delete p.id;
});

module.exports = {
    up: async knex => {
        const policy = '07adb3e8-ee1e-4b7c-b8b8-a03399ac3c57';
        await knex('directus_permissions')
            .delete()
            .where('policy', policy !== 'null' ? policy : null);
        return permissions.length ? knex('directus_permissions').insert(permissions) : true;
    },

    down: async knex => true,
};
